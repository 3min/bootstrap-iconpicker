/* ========================================================================
 * Bootstrap: bootstrap-iconpicker.js v2.0.0 by @recktoner
 * https://victor-valencia.github.com/bootstrap-iconpicker
 * ========================================================================
 * Copyright 2013-2014 Victor Valencia Rico.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */
+function(t){"use strict";var e=function(o,s){this.$element=t(o),this.options=t.extend({},e.DEFAULTS,this.$element.data()),this.options=t.extend({},this.options,s)};e.ICONSET_EMPTY={iconClass:"",iconClassFix:"",icons:[]},e.ICONSET={_custom:null,elusiveicon:t.iconset_elusiveicon||e.ICONSET_EMPTY,fontawesome:t.iconset_fontawesome||e.ICONSET_EMPTY,ionicon:t.iconset_ionicon||e.ICONSET_EMPTY,glyphicon:t.iconset_glyphicon||e.ICONSET_EMPTY,mapicon:t.iconset_mapicon||e.ICONSET_EMPTY,octicon:t.iconset_octicon||e.ICONSET_EMPTY,typicon:t.iconset_typicon||e.ICONSET_EMPTY,weathericon:t.iconset_weathericon||e.ICONSET_EMPTY},e.DEFAULTS={arrowClass:"btn-primary",arrowNextIconClass:"glyphicon glyphicon-arrow-right",arrowPrevIconClass:"glyphicon glyphicon-arrow-left",cols:4,icon:"",iconset:"glyphicon",labelHeader:"{0} / {1}",labelFooter:"{0} - {1} of {2}",placement:"bottom",rows:4,search:!0,searchText:"Search icon",selectedClass:"btn-warning",unselectedClass:"btn-default"},e.prototype.bindEvents=function(){var e=this.options,o=this;e.table.find(".btn-previous, .btn-next").off("click").on("click",function(){var s=parseInt(t(this).val());o.changeList(e.page+s)}),e.table.find(".btn-icon").off("click").on("click",function(){o.select(t(this).val()),o.$element.popover("destroy")}),e.table.find(".search-control").off("keyup").on("keyup",function(){o.changeList(1)})},e.prototype.changeList=function(o){var s=this.options,n=s.table.find(".search-control").val();if(""==n)s.icons=e.ICONSET[s.iconset].icons;else{var a=[];t.each(e.ICONSET[s.iconset].icons,function(t,e){e.indexOf(n)>-1&&a.push(e)}),s.icons=a}this.updateLabelBar(o);for(var i=s.table.find("tbody").empty(),c=(o-1)*s.rows*s.cols,r=0;r<s.rows;r++){for(var l=t("<tr></tr>"),p=0;p<s.cols;p++){var d=c+r*s.cols+p,h=t('<button class="btn '+s.unselectedClass+' btn-icon"></button>').hide();if(d<s.icons.length){var f=s.iconClassFix+s.icons[d];h.val(f).attr("title",f).append('<i class="'+s.iconClass+" "+f+'"></i>').show(),s.icon==f&&(h.addClass(s.selectedClass),h.addClass("btn-icon-selected"))}var u=t("<td></td>").append(h);l.append(u)}i.append(l)}s.page=o,this.bindEvents()},e.prototype.select=function(e){var o=this.options,s=this.$element;o.selected=t.inArray(e.replace(o.iconClassFix,""),o.icons),-1==o.selected&&(o.selected=0,e=o.iconClassFix+o.icons[o.selected]),""!=e&&o.selected>=0&&(o.icon=e,s.find("input").val(e),s.find("i").attr("class","").addClass(o.iconClass).addClass(e),s.trigger({type:"change",icon:e}),o.table.find("button."+o.selectedClass).removeClass(o.selectedClass))},e.prototype.switchPage=function(e){var o=this.options;if(o.selected=t.inArray(e.replace(o.iconClassFix,""),o.icons),""!=e&&o.selected>=0){var s=Math.ceil((o.selected+1)/(o.cols*o.rows));this.changeList(s)}o.table.find("i."+e).parent().addClass(o.selectedClass)},e.prototype.updateLabelBar=function(t){var e=this.options,o=e.icons.length,s=Math.ceil(o/(e.cols*e.rows));e.table.find(".page-count").html(e.labelHeader.replace("{0}",0==s?0:t).replace("{1}",s));var n=(t-1)*e.rows*e.cols,a=t*e.rows*e.cols;e.table.find(".icons-count").html(e.labelFooter.replace("{0}",n+1).replace("{1}",o>a?a:o).replace("{2}",o));var i=e.table.find(".btn-previous"),c=e.table.find(".btn-next");1==t?i.addClass("disabled"):i.removeClass("disabled"),t==s||0==s?c.addClass("disabled"):c.removeClass("disabled")},e.prototype.updateNavigationBar=function(){var e=this.options;if(e.cols<4)throw"Iconpicker => The number of columns must be greater than or equal to 4. [option.cols = "+e.cols+"]";if(e.rows<1)throw"Iconpicker => The number of rows must be greater than or equal to 1. [option.rows = "+e.rows+"]";for(var o=t("<tr></tr>"),s=0;s<e.cols;s++){var n=t('<button class="btn btn-arrow '+e.arrowClass+'"><span></span></button>'),a=t('<td class="text-center"></td>');0==s||s==e.cols-1?(n.val(0==s?-1:1),n.addClass(0==s?"btn-previous":"btn-next"),n.find("span").addClass(0==s?e.arrowPrevIconClass:e.arrowNextIconClass),a.append(n),o.append(a)):0==o.find(".page-count").length&&(a.attr("colspan",e.cols-2).append('<span class="page-count"></span>'),o.append(a))}e.table.find("thead").empty().append(o);var i=["<tr>",'   <td colspan="'+e.cols+'">','       <input type="text" class="form-control search-control" style="width: '+39*e.cols+'px;" placeholder="'+e.searchText+'">',"   </td>","</tr>"];i=t(i.join("")),1==e.search?i.show():i.hide(),e.table.find("thead").append(i);var c=["<tr>",'   <td colspan="'+e.cols+'" class="text-center">','       <span class="icons-count"></span>',"   </td>","</tr>"];e.table.find("tfoot").empty().append(c.join(""))},e.prototype.setArrowClass=function(t){var e=this.options;e.table.find(".btn-arrow").removeClass(e.arrowClass).addClass(t),e.arrowClass=t},e.prototype.setArrowNextIconClass=function(t){var e=this.options;e.table.find(".btn-next > span").removeClass(e.arrowNextIconClass).addClass(t),e.arrowNextIconClass=t},e.prototype.setArrowPrevIconClass=function(t){var e=this.options;e.table.find(".btn-previous > span").removeClass(e.arrowPrevIconClass).addClass(t),e.arrowPrevIconClass=t},e.prototype.setCols=function(t){var e=this.options;e.cols=t,this.updateNavigationBar(),this.changeList(1)},e.prototype.setIcon=function(t){this.select(t)},e.prototype.setIconset=function(o){var s=this.options;t.isPlainObject(o)?(e.ICONSET._custom=t.extend(e.ICONSET_EMPTY,o),s.iconset="_custom"):s.iconset=e.ICONSET.hasOwnProperty(o)?o:e.DEFAULTS.iconset,s=t.extend(s,e.ICONSET[s.iconset]),this.updateNavigationBar(),this.changeList(1),this.select(s.icon)},e.prototype.setLabelHeader=function(t){var e=this.options;e.labelHeader=t,this.updateLabelBar(e.page)},e.prototype.setLabelFooter=function(t){var e=this.options;e.labelFooter=t,this.updateLabelBar(e.page)},e.prototype.setPlacement=function(t){var e=this.options;e.placement=t},e.prototype.setRows=function(t){var e=this.options;e.rows=t,this.updateNavigationBar(),this.changeList(1)},e.prototype.setSearch=function(t){var e=this.options,o=e.table.find(".search-control");1==t?o.show():o.hide(),o.val(""),this.changeList(1),e.search=t},e.prototype.setSearchText=function(t){var e=this.options;e.table.find(".search-control").attr("placeholder",t),e.searchText=t},e.prototype.setSelectedClass=function(t){var e=this.options;e.table.find(".btn-icon-selected").removeClass(e.selectedClass).addClass(t),e.selectedClass=t},e.prototype.setUnselectedClass=function(t){var e=this.options;e.table.find(".btn-icon").removeClass(e.unselectedClass).addClass(t),e.unselectedClass=t};var o=t.fn.iconpicker;t.fn.iconpicker=function(o,s){return this.each(function(){var n=t(this),a=n.data("bs.iconpicker"),i="object"==typeof o&&o;if(a||n.data("bs.iconpicker",a=new e(this,i)),"string"==typeof o){if("undefined"==typeof a[o])throw'Iconpicker => The "'+o+'" method does not exists.';a[o](s)}else{var c=a.options;c=t.extend(c,{page:1,selected:-1,table:t('<table class="table-icons"><thead></thead><tbody></tbody><tfoot></tfoot></table>')});var r="undefined"!=typeof n.attr("name")?'name="'+n.attr("name")+'"':"";n.empty().append("<i></i>").append('<input type="hidden" '+r+"></input>").append('<span class="caret"></span>'),n.addClass("iconpicker"),a.setIconset(c.iconset),n.on("click",function(t){t.preventDefault(),n.popover({animation:!1,trigger:"manual",html:!0,content:c.table,container:"body",placement:c.placement}).on("shown.bs.popover",function(){a.switchPage(c.icon),a.bindEvents()}),n.data("bs.popover").tip().addClass("iconpicker-popover"),n.popover("show")})}})},t.fn.iconpicker.Constructor=e,t.fn.iconpicker.noConflict=function(){return t.fn.iconpicker=o,this},t(document).on("click","body",function(e){t(".iconpicker").each(function(){t(this).is(e.target)||0!==t(this).has(e.target).length||0!==t(".popover").has(e.target).length||t(this).popover("destroy")})}),t('button[role="iconpicker"]').iconpicker()}(window.jQuery);