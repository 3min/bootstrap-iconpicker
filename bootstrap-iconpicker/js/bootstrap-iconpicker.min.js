/* ========================================================================
 * Bootstrap: bootstrap-iconpicker.js v2.0.0 by @recktoner
 * https://victor-valencia.github.com/bootstrap-iconpicker
 * ========================================================================
 * Copyright 2013-2014 Victor Valencia Rico.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */
+function(t){"use strict";var e=function(n,o){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,this.$element.data()),this.options=t.extend({},this.options,o)};e.ICONSET_EMPTY={icons:[],iconClass:"",iconClassFix:""},e.ICONSET={_custom:null,elusiveicon:t.iconset_elusiveicon||e.ICONSET_EMPTY,fontawesome:t.iconset_fontawesome||e.ICONSET_EMPTY,ionicon:t.iconset_ionicon||e.ICONSET_EMPTY,glyphicon:t.iconset_glyphicon||e.ICONSET_EMPTY,mapicon:t.iconset_mapicon||e.ICONSET_EMPTY,octicon:t.iconset_octicon||e.ICONSET_EMPTY,typicon:t.iconset_typicon||e.ICONSET_EMPTY,weathericon:t.iconset_weathericon||e.ICONSET_EMPTY},e.DEFAULTS={iconset:"glyphicon",icon:"",rows:4,cols:4,placement:"bottom",arrowClass:"btn-primary",arrowPrevIconClass:"glyphicon glyphicon-arrow-left",arrowNextIconClass:"glyphicon glyphicon-arrow-right",selectedClass:"btn-warning",unselectedClass:"btn-default",search:!0,searchText:"Search icon"},e.prototype.createButtonBar=function(){for(var e=this.options,n=t("<tr></tr>"),o=0;o<e.cols;o++){var s=t('<button class="btn '+e.arrowClass+'"><span></span></button>'),i=t('<td class="text-center"></td>');0==o||o==e.cols-1?(s.val(0==o?-1:1),s.addClass(0==o?"btn-previous":"btn-next"),s.find("span").addClass(0==o?e.arrowPrevIconClass:e.arrowNextIconClass),i.append(s),n.append(i)):0==n.find(".page-count").length&&(i.attr("colspan",e.cols-2).append('<span class="page-count"></span>'),n.append(i))}if(e.table.find("thead").append(n),1==e.search){var c=["<tr>",'   <td colspan="'+e.cols+'">','       <input type="text" class="form-control search-control" style="width: '+39*e.cols+'px;" placeholder="'+e.searchText+'">',"   </td>","</tr>"];e.table.find("thead").append(c.join(""))}},e.prototype.updateButtonBar=function(t){var e=this.options,n=Math.ceil(e.icons.length/(e.cols*e.rows));e.table.find(".page-count").html((0==n?0:t)+" / "+n);var o=e.table.find(".btn-previous"),s=e.table.find(".btn-next");1==t?o.addClass("disabled"):o.removeClass("disabled"),t==n||0==n?s.addClass("disabled"):s.removeClass("disabled")},e.prototype.bindEvents=function(){var e=this.options,n=this;e.table.find(".btn-previous, .btn-next").off("click").on("click",function(){var o=parseInt(t(this).val());n.changeList(e.page+o)}),e.table.find(".btn-icon").off("click").on("click",function(){n.select(t(this).val()),n.$element.popover("destroy")}),e.table.find(".search-control").off("keyup").on("keyup",function(){n.changeList(1)})},e.prototype.select=function(e){var n=this.options,o=this.$element;n.selected=t.inArray(e.replace(n.iconClassFix,""),n.icons),-1==n.selected&&(n.selected=0,e=n.iconClassFix+n.icons[n.selected]),""!=e&&n.selected>=0&&(n.icon=e,o.find("input").val(e),o.find("i").attr("class","").addClass(n.iconClass).addClass(e),o.trigger({type:"change",icon:e}),n.table.find("button."+n.selectedClass).removeClass(n.selectedClass))},e.prototype.switchPage=function(e){var n=this.options;if(n.selected=t.inArray(e.replace(n.iconClassFix,""),n.icons),""!=e&&n.selected>=0){var o=Math.ceil((n.selected+1)/(n.cols*n.rows));this.changeList(o)}n.table.find("i."+e).parent().addClass(n.selectedClass)},e.prototype.changeList=function(n){var o=this.options,s="";if(1==o.search)if(s=o.table.find(".search-control").val(),""==s)o.icons=e.ICONSET[o.iconset].icons;else{var i=[];t.each(e.ICONSET[o.iconset].icons,function(t,e){e.indexOf(s)>-1&&i.push(e)}),o.icons=i}this.updateButtonBar(n);for(var c=o.table.find("tbody").empty(),a=(n-1)*o.rows*o.cols,l=0;l<o.rows;l++){for(var r=t("<tr></tr>"),p=0;p<o.cols;p++){var d=a+l*o.cols+p,h=t('<button class="btn '+o.unselectedClass+' btn-icon"></button>').hide();if(d<o.icons.length){var f=o.iconClassFix+o.icons[d];h=t('<button class="btn '+(o.icon==f?o.selectedClass:o.unselectedClass)+' btn-icon" value="'+f+'" title="'+f+'"><i class="'+o.iconClass+" "+f+'"></i></button>')}var u=t("<td></td>").append(h);r.append(u)}c.append(r)}o.page=n,this.bindEvents()},e.prototype.setIcon=function(t){this.select(t)};var n=t.fn.iconpicker;t.fn.iconpicker=function(n,o){return this.each(function(){var s=t(this),i=s.data("bs.iconpicker"),c="object"==typeof n&&n;if(i||s.data("bs.iconpicker",i=new e(this,c)),"string"==typeof n)i[n](o);else{var a=i.options;t.isPlainObject(a.iconset)?(e.ICONSET._custom=t.extend(e.ICONSET_EMPTY,a.iconset),a.iconset="_custom",console.log(e.ICONSET._custom)):e.ICONSET.hasOwnProperty(a.iconset)||(a.iconset=e.DEFAULTS.iconset),a=t.extend(a,e.ICONSET[a.iconset],{page:1,selected:-1,table:t('<table class="table-icons"><thead></thead><tbody></tbody></table>')});var l="undefined"!=typeof s.attr("name")?'name="'+s.attr("name")+'"':"";s.empty().append("<i></i>").append('<input type="hidden" '+l+"></input>").append('<span class="caret"></span>'),s.addClass("iconpicker"),i.createButtonBar(),i.changeList(1),s.on("click",function(t){t.preventDefault(),s.popover({animation:!1,trigger:"manual",html:!0,content:i.options.table,container:"body",placement:i.options.placement}).on("shown.bs.popover",function(){i.switchPage(a.icon),i.bindEvents()}),s.data("bs.popover").tip().addClass("iconpicker-popover"),s.popover("show")}),i.select(a.icon)}})},t.fn.iconpicker.Constructor=e,t.fn.iconpicker.noConflict=function(){return t.fn.iconpicker=n,this},t(document).on("click","body",function(e){t(".iconpicker").each(function(){t(this).is(e.target)||0!==t(this).has(e.target).length||0!==t(".popover").has(e.target).length||t(this).popover("destroy")})}),t('button[role="iconpicker"]').iconpicker()}(window.jQuery);